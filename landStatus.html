<html>
<head>
  <meta charset=utf-8 />
  <title>Simple FeatureLayer</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- Load Leaflet from CDN-->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet-src.js"></script>

  <!-- Load Esri Leaflet from CDN -->
  <script src="https://unpkg.com/esri-leaflet@2.0.7"></script>

  <style>
    body {
      margin:0;
      padding:0;
    }
    #map {
      position: absolute;
      top:0;
      bottom:0;
      right:0;
      left:0;
    }
    #query {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 1000;
    background: white;
    padding: 1em;
  }
  #query select {
    font-size: 16px;
  }

  </style>
</head>
<body>
  <div id="map"></div>
  <div id="query" class="leaflet-bar">
    <label>
      Land Status
      <select id="category">
        <!-- make sure to encase string values in single quotes for valid sql -->
        <option value='1=1'>Any</option>
        <option value="status='PARKLAND'">Parkland</option>
        <option value="status='LANDBANK'">Landbank</option>
      </select>
    </label>
  </div>
  <script>
  var map = L.map('map').setView([37.84, -121.98], 10);

  L.esri.basemapLayer('Gray').addTo(map);
  L.esri.basemapLayer('GrayLabels').addTo(map);

  var parks = L.esri.featureLayer({
          url: "https://services7.arcgis.com/R7TyJ1WBNculLJjo/arcgis/rest/services/east_bay_regional_parks/FeatureServer/0",
          style: function () {
            return { color: "#70ca49", weight: 2 };
          }
        }).addTo(map);

  var parkstatus = document.getElementById('category');

  category.addEventListener('change', function(){
    parks.setWhere(parkstatus.value);
  });

  parks.bindPopup(function (evt) {
    console.log(evt);
    return L.Util.template('<p><b>Park:</b> {name}<br><b>Land Status:</b> {status}</p>', evt.feature.properties);
  });
  </script>

</body>
</html>
